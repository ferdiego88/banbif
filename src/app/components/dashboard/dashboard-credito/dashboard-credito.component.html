<div>
    <form [formGroup]="dashboardForm">
        <img mat-card-image src="assets/img/bb.png" alt="BanBif Logo">
        <hr>
        <div class="row">
            <div class="row">
                <div class="col-md-12">
                    <span class="sub-title">Fecha de Creación</span>
                </div>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width" appearance="fill">
                    <mat-label>Desde</mat-label>
                    <input matInput [matDatepicker]="dpfc" formControlName="Fecha_Creacion_Desde">
                    <mat-datepicker-toggle matSuffix [for]="dpfc"></mat-datepicker-toggle>
                    <mat-datepicker #dpfc></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width" appearance="fill">
                    <mat-label>Hasta</mat-label>
                    <input matInput [matDatepicker]="dpfch" formControlName="Fecha_Creacion_Hasta">
                    <mat-datepicker-toggle matSuffix [for]="dpfch"></mat-datepicker-toggle>
                    <mat-datepicker #dpfch></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Zona" formControlName="ZonaId">
                        <mat-option>Todas</mat-option>
                        <mat-option *ngFor="let zona of zonaModelList" [value]="zona.Id">Zona {{zona.Title}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Oficina" formControlName="OficinaId">
                        <mat-option [value]="">Todas</mat-option>
                        <mat-option *ngFor="let oficina of oficinaList" [value]="oficina.Id">
                            {{oficina.Title}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Vendedor" formControlName="Vendedor">
                        <mat-option [value]="">Todas</mat-option>
                        <mat-option [value]=""> Zona 1</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Canal" formControlName="Canal">
                        <mat-option [value]="">Todas</mat-option>
                        <mat-option *ngFor="let item of data" [value]="item.id">
                          {{item.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12">
                <span class="sub-title">Fecha Estado Activo</span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2">
                <mat-form-field class="full-width" appearance="fill">
                    <mat-label>Desde</mat-label>
                    <input matInput [matDatepicker]="dpfed" formControlName="Fecha_Creacion_Desde">
                    <mat-datepicker-toggle matSuffix [for]="dpfed"></mat-datepicker-toggle>
                    <mat-datepicker #dpfed></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width" appearance="fill">
                    <mat-label>Hasta</mat-label>
                    <input matInput [matDatepicker]="dpfech" formControlName="Fecha_Creacion_Hasta">
                    <mat-datepicker-toggle matSuffix [for]="dpfech"></mat-datepicker-toggle>
                    <mat-datepicker #dpfech></mat-datepicker>
                </mat-form-field>
            </div>
            <!-- <div class="col-md-2">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Responsable" formControlName="Responsable">
                        <mat-option [value]="">Todas</mat-option>
                        <mat-option [value]=""> Zona 1</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Semáforo" formControlName="Semaforo">
                        <mat-option [value]="">Todas</mat-option>
                        <mat-option [value]=""> Zona 1</mat-option>
                    </mat-select>
                </mat-form-field>
            </div> -->
            <div class="col-md-2">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Tipo de Producto" formControlName="Tipo_ProductoId">
                        <mat-option>Todas</mat-option>
                        <mat-option *ngFor="let producto of tipoProductoList" [value]="producto.Id">
                            {{producto.Title}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div>
            <table>
                <thead>
                    <tr>
                        <th class="td-center">Estados</th>
                        <th>Expedientes</th>
                        <th>Tiempo Promedio estación</th>
                        <th>Tiempo Promedio Total</th>
                        <th>Fuera de ANS</th>
                        <th>Monto S/.</th>
                        <th>Fuera de ANS Acumulado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of dashboard">
                        <td class="td-center">{{item.Title}}</td>
                        <td>
                            <a (click)="getSolicitudesPorEstado(item.Id)">{{item.Cantidad}}</a>
                        </td>
                        <td>{{item.TiempoPromedio | number: '.0-2' }}</td>
                        <td>{{item.TiempoPromedioTotal | number: '.0-2' }}</td>
                        <td>
                            <a (click)="getSolicitudesANS(0,item.Id)">{{item.FueraANS}}</a> </td>
                        <td>{{item.Monto | currency:'S/. ':'symbol':'.0-0' }}</td>
                        <td>
                            <a (click)="getSolicitudesANS(item.FueraANSAcumulado)">{{item.FueraANSAcumulado}}</a></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td>Totales</td>
                        <td>{{totalExpedientes}}</td>
                        <td>{{totalTiempoPromedioEstacion | number: '.0-2' }}</td>
                        <td>{{totalTiempoPromedioTotal | number: '.0-2' }}</td>
                        <td> {{totalFueraANS}}</td>
                        <td>{{totalMonto | currency:'S/. ':'symbol':'.0-0' }}</td>
                        <td> {{totalFueraANS}}</td>
                    </tr>
                </tfoot>
            </table>
        </div>
      </form>
      <div [ngClass]="{
        'd-none': !showSolicitudes,
        'col-md-12': showSolicitudes
    }">
          <br>
          <table>
              <thead>
                  <tr>
                      <th>Nº de Solicitud</th>
                      <th>Nombre del Cliente</th>
                      <th>Nro. de Documento</th>
                      <th>Nombre del Ejecutivo</th>
                      <th>Tipo de Producto</th>
                      <th>Estación</th>
                      <th>Fecha de la Solicitud</th>
                      <th>Zona</th>
                      <th>Oficina</th>
                      <th>Moneda</th>
                      <th>Desembolso</th>
                      <th>Fecha de Creación</th>
                  </tr>
              </thead>
              <tbody>
                  <tr *ngFor="let solicitud of solicitudesEstadoList">
                      <td>{{solicitud.Id}}</td>
                      <td>{{solicitud.Nombre_Titular}}</td>
                      <td>{{solicitud.N_Documento}}</td>
                      <td>{{solicitud.Author ? solicitud.Author.Title: "-------" }}</td>
                      <td>{{solicitud.Tipo_ProductoId}}</td>
                      <td>{{solicitud.Estado.Title }}</td>
                      <td>{{solicitud.Fecha_Estado | date:'dd/MM/yy hh:mm a'}}</td>
                      <td>{{solicitud.ZonaId ? solicitud.ZonaId: "-------" }}</td>
                      <td>{{solicitud.Oficina ? solicitud.Oficina.Title: "SIN OFICINA"}}</td>
                      <td>{{solicitud.Mon_Desembolso}}</td>
                      <td>{{solicitud.Desembolso | number:'.0-0' }}</td>
                      <td>{{solicitud.Created | date:'dd/MM/yy hh:mm a'}}</td>
                  </tr>
              </tbody>

          </table>
      </div>
</div>
