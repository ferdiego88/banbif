<div class="container floating">
    <form [formGroup]="creditForm">

        <div class="row mt-21 mb-21">
            <div class="col">
                <span class="title">FICHA DE CRÉDITO HIPOTECARIO</span>
            </div>
        </div>

        <mat-divider class="mb-21 ml-16 mr-16"></mat-divider>

        <div class="row">

            <div class="col-md-6">
                <mat-form-field class="full-width">
                    <mat-label>Producto - Código <span class="obligatorio">(*)</span>
                    </mat-label>
                    <mat-select placeholder="Producto - Código" formControlName="Tipo_ProductoId">
                        <mat-option *ngFor="let tipoProducto of tipoProductoList" [value]="tipoProducto.Id">
                            {{ tipoProducto.Title }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="creditForm.controls['Tipo_ProductoId'].hasError('required')">
                        Seleccione un valor
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="full-width">
                    <mat-label>Ejecutivo <span class="obligatorio">(*)</span>
                    </mat-label>
                    <people-picker-input formControlName="ejecutivo" (onRemove)="removePeople()"
                        placeholder="Escribe un nombre..." [multiple]="false">
                    </people-picker-input>
                </mat-form-field>
            </div>

        </div>

        <div class="row">
            <div class="col-md-6">
                <mat-form-field class="full-width">
                    <mat-label>Sub Producto - Código <span class="obligatorio">(*)</span></mat-label>
                    <mat-select placeholder="Sub Producto - Código" formControlName="Sub_ProductoId">
                        <mat-option *ngFor="let tipoSubProducto of tipoSubProductoList" [value]="tipoSubProducto.Id">
                            {{ tipoSubProducto.Title }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="creditForm.controls['Sub_ProductoId'].hasError('required')">
                        Seleccione un valor
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6">

                <mat-form-field class="full-width">
                    <mat-label>Zona <span class="obligatorio">(*)</span></mat-label>
                    <mat-select placeholder="Zona" formControlName="ZonaId">
                        <mat-option *ngFor="let zona of zonaModelList" [value]="zona.Id">
                            {{ zona.Title }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="creditForm.controls['ZonaId'].hasError('required')">
                        Seleccione un valor
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <mat-form-field class="full-width">
                    <mat-label>Modalidad <span class="obligatorio">(*)</span>
                    </mat-label>
                    <mat-select placeholder="Modalidad" formControlName="ModalidadId">
                        <mat-option *ngFor="let modalidad of modalidadList" [value]="modalidad.Id">
                            {{ modalidad.Title }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="creditForm.controls['ModalidadId'].hasError('required')">
                        Seleccione un valor
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field class="full-width">
                    <mat-label>Oficina <span class="obligatorio">(*)</span>
                    </mat-label>
                    <mat-select placeholder="Oficina" formControlName="OficinaId">
                        <mat-option *ngFor="let oficina of oficinaList" [value]="oficina.Id">
                            {{ oficina.Title }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="creditForm.controls['OficinaId'].hasError('required')">
                        Seleccione un valor
                    </mat-error>
                </mat-form-field>
            </div>

        </div>

        <div class="row">
            <div [ngClass]="{
                    'd-none': !showBotonesProducto,
                    'col-md-3': showBotonesProducto
                    }">
                <button mat-raised-button color="primary" type="button" class="full-width"
                    (click)="CalificacionTradicional()">Calificación Tradicional</button>
            </div>

            <div [ngClass]="{
                    'd-none': !showBotonesProducto,
                    'col-md-3': showBotonesProducto
                    }">
                <button mat-raised-button color="primary" type="button" class="full-width" (click)="PlanAhorro()">Plan
                    Ahorro</button>
            </div>

            <div class="col-md-6" [ngClass]="{
                        'offset-md-6': !showBotonesProducto
                    }">
                <mat-form-field class="full-width">
                    <mat-select placeholder="Estado" formControlName="EstadoId">
                        <mat-option *ngFor="let estado of estadoList" [value]='estado.Id'>
                            {{estado.Title}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <!-- CUIDADO CON LOS ESTILOS DE EL HTML DE ARRIBA -->
        <div class="row">
            <div [ngClass]="{
                        'col-md-12': !showPlanAhorro,
                        'col-md-6': showPlanAhorro
                    }">
                <div class="row">

                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Tipo de Documento <span class="obligatorio">(*)</span>
                            </mat-label>
                            <mat-select placeholder="Tipo de Documento" formControlName="Tipo_DocumentoId">
                                <mat-option *ngFor="let dcmto of typeDocumentList" [value]="dcmto.Id">
                                    {{ dcmto.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Tipo_DocumentoId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>N° de Documento <span class="obligatorio">(*)</span>
                            </mat-label>
                            <input matInput placeholder="N° de Documento" type="number" formControlName="N_Documento">
                            <mat-error *ngIf="creditForm.controls['N_Documento'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                </div>
                <div class="row-md-12">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Nombre del Titular <span class="obligatorio">(*)</span>
                            </mat-label>
                            <input matInput placeholder="Nombre del Titular" formControlName="Nombre_Titular">
                            <mat-error *ngIf="creditForm.controls['Nombre_Titular'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="Riesgo Máximo (Monto en USD)" formControlName="Riesgo_Maximo">
                            <!-- <input type="text" class="form-control" id="separadorMiles" placeholder="Separador de miles"> -->
                            <mat-error *ngIf="creditForm.controls['Riesgo_Maximo'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Sustento de Ingresos" formControlName="Sustento_IngresosId">
                                <mat-option *ngFor="let sustento of sustIngresosList" [value]="sustento.Id">
                                    {{ sustento.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Sustento_IngresosId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                </div>
                <div class="row">
                    <div class="col">
                        <mat-checkbox formControlName="Oferta">Oferta</mat-checkbox>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p>Tipo de Renta</p>
                    </div>
                    <div class="col">
                        <p>Titular</p>
                        <mat-checkbox formControlName="T1">1ERA</mat-checkbox><br>
                        <mat-checkbox formControlName="T2">2DA</mat-checkbox><br>
                        <mat-checkbox formControlName="T3">3ERA</mat-checkbox><br>
                        <mat-checkbox formControlName="T4">4TA</mat-checkbox><br>
                        <mat-checkbox formControlName="T5">5TA</mat-checkbox>
                    </div>

                    <div class="col">
                        <p>Cónyugue</p>
                        <mat-checkbox formControlName="C1">1ERA</mat-checkbox><br>
                        <mat-checkbox formControlName="C2">2DA</mat-checkbox><br>
                        <mat-checkbox formControlName="C3">3ERA</mat-checkbox><br>
                        <mat-checkbox formControlName="C4">4TA</mat-checkbox><br>
                        <mat-checkbox formControlName="C5">5TA</mat-checkbox>
                    </div>

                </div>
            </div>


            <!---------------------------------------------->
            <!-- Ini - Plan de Ahorro -->
            <!---------------------------------------------->
            <div [ngClass]="{
              'd-none': !showPlanAhorro,
              'col-md-6': showPlanAhorro
          }">
                <div class="col sub-title-col">
                    <span class="sub-title">
                        PLAN DE AHORRO PROGRAMADO
                    </span>
                </div>
                <hr>
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Meses de Ahorro" type="number" formControlName="Meses_Abono">
                            <mat-error *ngIf="creditForm.controls['Meses_Abono'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Moneda de Ahorro" formControlName="Tipo_Moneda_AhorroId">
                                <mat-option *ngFor="let typeCurrency of typeCurrencySaving" [value]="typeCurrency.Id">
                                    {{ typeCurrency.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Tipo_Moneda_AhorroId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="Importe Cuota Ahorro" type="text" formControlName="Importe_Cuota_Ahorro">
                            <mat-error *ngIf="creditForm.controls['Importe_Cuota_Ahorro'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Situación de Plan de Ahorro"
                                formControlName="Situacion_Plan_AhorroId">
                                <mat-option *ngFor="let plan of planSituationSavingList" [value]="plan.Id">
                                    {{ plan.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Situacion_Plan_AhorroId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Nº de Abonos Validados" type="number"
                                formControlName="N_Abonos_Validados">
                            <mat-error *ngIf="creditForm.controls['N_Abonos_Validados'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Último Abono Validado(Mes/Año)"
                                formControlName="Ultimo_Abono_ValidadoId">
                                <mat-option *ngFor="let lastBono of LastValidatedBonoList" [value]="lastBono.Id">
                                    {{ lastBono.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Ultimo_Abono_ValidadoId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Nº de Cta. Ahorro BanBif" type="number"
                                formControlName="Cta_Ahorro_BanBif">
                            <mat-error *ngIf="creditForm.controls['Cta_Ahorro_BanBif'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <!---------------------------------------------->
            <!-- Fin - Plan de Ahorro -->
            <!---------------------------------------------->
        </div>

        <div class="" [ngClass]="{
            'd-none':!showAsignacionRiesgos,
             'col-md-12': showAsignacionRiesgos
        }">
            <div class="row" style="padding-bottom: 15px;">
                <div class="col sub-title-col">
                    <span class="sub-title">DATOS DE LA OPERACIÓN</span>
                </div>
            </div>

            <div class="row" *ngIf="!showGarantias">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Nombre de Proyecto" formControlName="ProyectoId">
                            <mat-option *ngFor="let project of projectList" [value]="project.Id">
                                {{ project.Title }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="creditForm.controls['ProyectoId'].hasError('required')">
                            Seleccione un valor
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Número de Vivienda" formControlName="N_ViviendaId">
                            <mat-option *ngFor="let vivienda of nviviendaList" [value]="vivienda.Id">
                                {{ vivienda.Title }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="creditForm.controls['N_ViviendaId'].hasError('required')">
                            Seleccione un valor
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Tipo de Moneda" formControlName="MonedaId">
                            <mat-option *ngFor="let currency of currencyList" [value]="currency.Id">
                                {{ currency.Title }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="creditForm.controls['MonedaId'].hasError('required')">
                            Seleccione un valor
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <input matInput placeholder="TEA (%)" type="number" step="0.00000001" min="0.00000000"
                            formControlName="TEA">
                        <mat-error *ngIf="creditForm.controls['TEA'].hasError('required')">
                            Ingrese un valor
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="TEA Autorizada por" formControlName="TEA_AutorizadoId">
                            <mat-option *ngFor="let tea of TEAList" [value]="tea.Id">
                                {{ tea.Title }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="creditForm.controls['TEA_AutorizadoId'].hasError('required')">
                            Seleccione un valor
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div [ngClass]="{
                      'd-none': !showPVenta,
                      'col-md-12': showPVenta
                  }">
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Tipo Moneda" formControlName="Mon_PrecioVentaId">
                                <mat-option *ngFor="let typeCurrency of typeCurrencyList" [value]="typeCurrency.Id">
                                    {{ typeCurrency.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Mon_PrecioVentaId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col">
                        <mat-form-field class="full-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="Precio de Venta" type="text" formControlName="Precio_Venta">
                            <mat-error *ngIf="creditForm.controls['Precio_Venta'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="" [ngClass]="{
                      'd-none': !showmessageVivienda,
                      'col': showmessageVivienda
                  }">
                    <div class="row padre">
                        <div class="col md-12">
                            Corregir: Monto mínimo S/ 60,000, máximo 427,600
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="( % ) de Financiamiento" type="number"
                                formControlName="pFinanciamiento">
                            <mat-error *ngIf="creditForm.controls['pFinanciamiento'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                </div>
            </div>



            <!---------------------------------------------->
            <!-- Ini - Garantías -->
            <!---------------------------------------------->
            <div [ngClass]="{
                          'd-none': !showGarantias,
                          'col-md-12': showGarantias
                      }">
                <div class="row">
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            GARANTÍAS
                        </span>
                    </div>
                </div>


                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Descripción del Inmueble"
                                formControlName="Descripcion_Inmueble">
                            <mat-error *ngIf="creditForm.controls['Descripcion_Inmueble'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col">
                        <mat-form-field class="full-width" appearance="fill">
                            <mat-label>Fecha de Tasación</mat-label>
                            <input matInput [matDatepicker]="dp" formControlName="Fecha_Tasacion_Remodelac">
                            <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                            <mat-datepicker #dp></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>



                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="" formControlName="Mon_Valor_ComTas_Soles" class="label-black">
                            <mat-error *ngIf="creditForm.controls['Importe_Cuota_Ahorro'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="Valor Tasación soles" type="number"
                                formControlName="Valor_ComTas_Soles">
                            <mat-error *ngIf="creditForm.controls['Valor_ComTas_Soles'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="" formControlName="Mon_VRI_Soles" class="label-black">
                            <mat-error *ngIf="creditForm.controls['Mon_VRI_Soles'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <input matInput placeholder="VRI soles" type="number" formControlName="VRI_Soles">
                            <mat-error *ngIf="creditForm.controls['VRI_Soles'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

            </div>
            <!---------------------------------------------->
            <!-- Fin - Plan de Garantías -->
            <!---------------------------------------------->

            <!---------------------------------------------->
            <!-- Ini - Cuota Inicial -->
            <!---------------------------------------------->
            <div [ngClass]="{
                          'd-none': !showCuotaInicial,
                          'col-md-6': showCuotaInicial
                      }">
                <div class="row">
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            CUOTA INICIAL
                        </span>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Tipo Moneda" formControlName="Mon_Ap_Efectivo">
                                <mat-option *ngFor="let typeCurrency of currencyAporteEfectivoList"
                                    [value]="typeCurrency.Id">
                                    {{ typeCurrency.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Mon_Ap_Efectivo'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col">
                        <mat-form-field class="full-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="Aporte en Efectivo" type="text" formControlName="Aporte_Efectivo">
                            <mat-error *ngIf="creditForm.controls['Aporte_Efectivo'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Tipo Moneda" formControlName="Mon_Aport_AFPId">
                                <mat-option *ngFor="let typeCurrency of currencyAporteAFPList"
                                    [value]="typeCurrency.Id">
                                    {{ typeCurrency.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Mon_Aport_AFPId'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="col">
                        <mat-form-field class="full-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="Aporte de retiro AFP" type="text" formControlName="Aporte_RetiroAFP">
                            <mat-error *ngIf="creditForm.controls['Aporte_RetiroAFP'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <!---------------------------------------------->
                <!-- Ini - Buen Pagador -->
                <!---------------------------------------------->

                <div [ngClass]="{
                          'd-none': !showBuenPagador,
                          'col-md-12': showBuenPagador
                      }">
                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width">
                                <input matInput placeholder="Tipo Moneda" formControlName="Mon_BBP">
                                <mat-error *ngIf="creditForm.controls['Mon_BBP'].hasError('required')">
                                    Ingrese un valor
                                </mat-error>
                            </mat-form-field>
                        </div>

                        <div class="col">
                            <mat-form-field class="full-width">
                                <input matInput placeholder="Bono Buen Pagador (BBP)" type="text" formControlName="BBP">
                                <mat-error *ngIf="creditForm.controls['BBP'].hasError('required')">
                                    Ingrese un valor
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width">
                                <input matInput placeholder="Tipo Moneda" formControlName="Mon_PBB">
                                <mat-error *ngIf="creditForm.controls['Mon_PBB'].hasError('required')">
                                    Ingrese un valor
                                </mat-error>
                            </mat-form-field>
                        </div>

                        <div class="col">
                            <mat-form-field class="full-width">
                                <input matInput placeholder="Premio Buen pagador (PBP)" type="text"
                                    formControlName="PBP">
                                <mat-error *ngIf="creditForm.controls['PBP'].hasError('required')">
                                    Ingrese un valor
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width">
                                <mat-select placeholder="Seleccione" formControlName="BBP_AdicionalId">
                                    <mat-option *ngFor="let BBPA of BBPAdicionalList" [value]="BBPA.Id">
                                        {{ BBPA.Title }}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="creditForm.controls['BBP_AdicionalId'].hasError('required')">
                                    Seleccione un valor
                                </mat-error>
                            </mat-form-field>
                        </div>

                        <div class="col">
                            <mat-form-field class="full-width">
                                <input matInput placeholder="BBP adicional por vivienda sostenible" type="text"
                                    formControlName="PBP_Adiconal_Sostenible">
                                <mat-error *ngIf="creditForm.controls['PBP_Adiconal_Sostenible'].hasError('required')">
                                    Ingrese un valor
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>


                </div>

                <!---------------------------------------------->
                <!-- Fin - Bue Pagador -->
                <!---------------------------------------------->



            </div>
            <!---------------------------------------------->
            <!-- Fin - Cuota Inicial -->
            <!---------------------------------------------->

            <!--- Ini Datos-->
            <div class="row-md-12">
                <div [ngClass]="{
                    'col-md-12': !showCuotaInicial,
                    'col-md-6': showCuotaInicial
                }">

                    <div class="row">
                        <div class="col sub-title-col">
                            <span class="sub-title">
                                DATOS DE LA OPERACIÓN
                            </span>
                        </div>
                    </div>
                    <br>

                    <div class="row">
                        <div class="col">
                            <button mat-raised-button color="primary" class="full-width" (click)="calculaDesembolso()"
                                type="button">Calcular</button>

                        </div>
                        <div class="col">
                            <mat-form-field class="full-width">
                                <mat-select placeholder="Seleccione Tipo Moneda" formControlName="Mon_Desembolso">
                                    <mat-option *ngFor="let moneda of typeCurrencyList" [value]="moneda.Title">
                                        {{ moneda.Title }}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="creditForm.controls['Mon_Desembolso'].hasError('required')">
                                    Seleccione un valor
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field class="full-width">
                                <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off"
                                    matInput placeholder="Desembolso" type="text" formControlName="Desembolso">
                                <mat-error *ngIf="creditForm.controls['Desembolso'].hasError('required')">
                                    Ingrese un valor
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <button mat-raised-button color="primary" class="full-width" (click)="calculaGravamen()"
                                type="button">Calcular</button>
                        </div>

                        <div class="col">
                            <mat-form-field class="full-width">
                                <mat-select placeholder="Seleccione Tipo Moneda" formControlName="Mon_Gravamen">
                                    <mat-option *ngFor="let moneda of typeCurrencyList" [value]="moneda.Title">
                                        {{ moneda.Title }}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="creditForm.controls['Mon_Gravamen'].hasError('required')">
                                    Seleccione un valor
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field class="full-width">
                                <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off"
                                    matInput placeholder="Gravamen (120% x Desembolso)" type="text"
                                    formControlName="Grabamen">
                                <mat-error *ngIf="creditForm.controls['Grabamen'].hasError('required')">
                                    Ingrese un valor
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>



            </div>
            <!--- Fin Datos-->

            <div class="row-md-12">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Modalidad de Pago" formControlName="Modalidad_PagoId">
                            <mat-option *ngFor="let payMethod of paymentMethodList" [value]="payMethod.Id">
                                {{ payMethod.Title }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="creditForm.controls['Modalidad_PagoId'].hasError('required')">
                            Seleccione un valor
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-label>Observaciones (Opcional)</mat-label>
                        <textarea matInput placeholder="Observaciones" multiline rows="3"
                            formControlName="Observaciones"></textarea>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Lugar donde se realizó la visita (OFICINA/FERIA)"
                            formControlName="Lugar_VisitaId">
                            <mat-option *ngFor="let place of visitingPlaceList" [value]="place.Id">
                                {{ place.Title }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="creditForm.controls['Lugar_VisitaId'].hasError('required')">
                            Seleccione un valor
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col">
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Período de Gracia" type="number" formControlName="Periodo_Gracia">
                        <mat-error *ngIf="creditForm.controls['Periodo_Gracia'].hasError('required')">
                            Ingrese un valor
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="" [ngClass]="{
                'd-none':!showAnalistaRiesgos,
                'row': showAnalistaRiesgos
            }">
                <div class="col-md-6">
                    <mat-form-field class="full-width">
                        <mat-label>Analista de Riesgo <span class="obligatorio">(*)</span></mat-label>
                        <people-picker-input formControlName="Analista_Riesgos" (onRemove)="removeAnalista()"
                            placeholder="Escribe un nombre..." [multiple]="false">
                        </people-picker-input>
                    </mat-form-field>
                </div>
            </div>
            <hr>
            <div class="" [ngClass]="{
              'd-none':!showTipoGarantiaAbono,
              'col': showTipoGarantiaAbono
          }">
                <div class="row">
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            TIPO DE GARANTÍA
                        </span>
                    </div>
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            TIPO DE ABONO
                        </span>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="" formControlName="Tipo_GarantiaId">
                                <mat-option *ngFor="let typeGuarentee of typeguarenteeList" [value]="typeGuarentee.Id">
                                    {{ typeGuarentee.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Tipo_GarantiaId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="" formControlName="Tipo_AbonoId">
                                <mat-option *ngFor="let abono of paymentTypeList" [value]="abono.Id">
                                    {{ abono.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['Tipo_AbonoId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

            </div>


            <hr>

            <div class="" [ngClass]="{
                        'd-none':!showBuenAplicacion,
                        'col': showBuenAplicacion
                    }">
                <div class="row">
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            APLICACIÓN
                        </span>
                    </div>
                </div>
                <div class="row">
                    <div class="col">La operación se realizará en </div>
                    <div class="col">
                        <mat-form-field class="text-width">
                            <input matInput placeholder="" type="number" formControlName="Numero_Desemboslo">
                            <mat-error *ngIf="creditForm.controls['Numero_Desemboslo'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col label-aplicacion">
                        Desembolsos parciales, los cuales estarán condicionados a:
                    </div>
                </div>
                <div class="row">
                    <div class="col">1er Desembolso por S/ </div>
                    <div class="col">
                        <mat-form-field class="text-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="" type="text" formControlName="Primer_desembolso">
                        </mat-form-field>
                    </div>
                    <div class="col label-aplicacion">
                        Bloqueo Inscrito.
                    </div>
                </div>
                <div class="row">
                    <div class="col">2do Desembolso por S/ </div>
                    <div class="col">
                        <mat-form-field class="text-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="" type="text" formControlName="Segundo_desembolso">
                        </mat-form-field>
                    </div>
                    <div class="col label-aplicacion">
                        Contra validación de los recursos entregados 1er Desembolso.
                    </div>
                </div>
                <div class="row">
                    <div class="col">3er Desembolso por S/ </div>
                    <div class="col">
                        <mat-form-field class="text-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="" type="text" formControlName="Tercer_desembolso">
                        </mat-form-field>
                    </div>
                    <div class="col label-aplicacion">
                        Contra validación de los recursos entregados 2do Desembolso.
                    </div>
                </div>
                <div class="row">
                    <div class="col">Aporte de Cliente por S/</div>
                    <div class="col">
                        <mat-form-field class="text-width">
                            <input onchange="MASK(this,this.value,'-###,###,###,##0.00',1)" autocomplete="off" matInput
                                placeholder="" type="text" formControlName="Aporte_Cliente">
                        </mat-form-field>
                    </div>
                    <div class="col label-red">
                        (En caso de no financiar el 100% del Presupuesto de Obra)
                    </div>
                </div>

            </div>

            <div class="col">
                <div class="col sub-title-col">
                    <span class="sub-title">CONDICIÓN DE DESEMBOLSO</span>
                </div>
                <div class="col">
                    <mat-form-field class="full-width">
                        <textarea matInput placeholder="" multiline rows="4" formControlName="Condicion_Desembolso">
                        </textarea>
                    </mat-form-field>
                </div>
            </div>
            <div class="" [ngClass]="{
                'd-none':!showPlanAhorro,
                'col':showPlanAhorro
              }">
                <div class="col sub-title-col">
                    <span class="sub-title">
                        PLAN DE AHORRO
                    </span>
                </div>
                <mat-form-field class="full-width">
                    <mat-label>Plan de Ahorro</mat-label>
                    <textarea matInput placeholder="" multiline rows="5" formControlName="Plan_Ahorro">
                    </textarea>
                </mat-form-field>
            </div>
            <div *ngIf="showDesembolsado" class="row" style="padding-bottom: 10px;">
                <div class="col">
                    <mat-checkbox formControlName="Desembolsado">Desembolsado</mat-checkbox>
                </div>
            </div>
            <div class="row">
                <div class="col sub-title-col">
                    <span class="sub-title">
                        DOCUMENTOS DE LA SOLICITUD
                    </span>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <a href="{{enlaceDocumentos}}" target="_blank">{{descripcionDocumentos }}</a>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col sub-title-col">
                    <span class="sub-title">
                        COMENTARIOS DE LA OFICINA
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <textarea matInput placeholder="Comentarios de la Oficina"
                            formControlName="Desembolso_Ampliacion" multiline rows="3"></textarea>
                    </mat-form-field>
                </div>
            </div>
            <div *ngIf="showComentarioGestor">
                <div class="row" style="padding-bottom: 20px;">
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            COMENTARIOS DEL GESTOR
                        </span>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <textarea matInput placeholder="Comentarios del Gestor" formControlName="ComentarioGestor"
                                multiline rows="3"></textarea>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Usuario Ingreso File <span class="obligatorio">(*)</span></mat-label>
                            <people-picker-input formControlName="UsuarioIngresoFile"
                                (onRemove)="removeUsuarioIngresoFile()" placeholder="Escribe un nombre..."
                                [multiple]="false">
                            </people-picker-input>
                        </mat-form-field>
                    </div>
                </div>
                <div class="" [ngClass]="{'d-none': !showControlesGestor,'col': showControlesGestor}">
                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width">
                                <mat-select placeholder="Seleccione Estado Gestor" formControlName="EstadoGestorId">
                                    <mat-option *ngFor="let estado of estadoGestorList" [value]="estado.Id">
                                        {{ estado.Title }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field class="full-width" appearance="fill">
                                <mat-label>Fecha de Gestor</mat-label>
                                <input matInput [matDatepicker]="dpi" formControlName="Fecha_Gestor_Hip">
                                <mat-datepicker-toggle matSuffix [for]="dpi"></mat-datepicker-toggle>
                                <mat-datepicker #dpi></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <mat-form-field class="full-width">
                                <mat-label>Comentario Gestor</mat-label>
                                <textarea matInput placeholder="Comentarios Gestor" formControlName="Comentario_Gestor_Hip"
                                    multiline rows="3"></textarea>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <!--<div class="row" style="padding-bottom: 20px;">
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            CPM
                        </span>
                    </div>
                </div>-->
                <div class="row">
                    <div class="col" [hidden]="!mostrarNumeroPropuesta">
                        <mat-form-field class="full-width">
                            <mat-label>Número de Propuesta
                            </mat-label>
                            <input matInput placeholder="Número de Propuesta" formControlName="NumeroPropuesta">
                            <mat-error *ngIf="creditForm.controls['NumeroPropuesta'].hasError('required')">
                                Ingrese un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="" [ngClass]="{'d-none': !showObservacionCPM,'col': showObservacionCPM}">
                        <mat-form-field class="full-width">
                            <mat-select placeholder="Observación CPM" formControlName="Observacion_CPMId">
                                <mat-option>Ninguna</mat-option>
                                <mat-option *ngFor="let observacion of observacionesCPMList" [value]="observacion.Id">
                                    {{ observacion.Title }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="" [ngClass]="{'d-none': !showComentarioCPM,'col': showComentarioCPM}">
                        <mat-form-field class="full-width">
                            <mat-label>Comentarios CPM</mat-label>
                            <textarea matInput placeholder="Comentarios CPM" multiline rows="3"
                                formControlName="Comentario_Registro"></textarea>
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <div>
                <!--<div class="row" style="padding-bottom: 20px;">
                    <div class="col sub-title-col">
                        <span class="sub-title">
                            RIESGO
                        </span>
                    </div>
                </div>-->
                <div class="row">
                    <div class="" [ngClass]="{'d-none': !showComentarioRevisor,'col': showComentarioRevisor}">
                        <mat-form-field class="full-width">
                            <mat-label>Comentarios de Asistente de Riesgos</mat-label>
                            <textarea matInput placeholder="Comentarios de Asistente de Riesgos"
                                formControlName="Cometario_Revisor1" multiline rows="3"></textarea>
                        </mat-form-field>
                    </div>
                </div>
    
                <div class="row">
                    <div class="" [ngClass]="{'d-none': !showComentarioRiesgos,'col': showComentarioRiesgos}">
                        <mat-form-field class="full-width">
                            <mat-label>Comentarios de Riesgos</mat-label>
                            <textarea matInput placeholder="Comentarios de Riesgos" formControlName="Cometario_Evaluacion"
                                multiline rows="3"></textarea>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="" [ngClass]="{'d-none': !showMotivoObservacionRiesgos,'col': showMotivoObservacionRiesgos}">
                        <mat-form-field class="full-width">
                            <mat-label>Motivo Observación de Riesgo</mat-label>
                            <mat-select placeholder="Motivo Observación de Riesgo"
                                formControlName="MotivoObsEvaluacionRiesgoId">
                                <mat-option *ngFor="let elemento of motivoObservacionEvaluacionRiesgoList"
                                    [value]="elemento.Id">
                                    {{ elemento.Title }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="creditForm.controls['MotivoObsEvaluacionRiesgoId'].hasError('required')">
                                Seleccione un valor
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="" [ngClass]="{'d-none': showAsignacionRiesgos,'row': !showAsignacionRiesgos}">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Comentario de Revision</mat-label>
                            <textarea matInput placeholder="Comentario de Revision" formControlName="Cometario_Revisor"
                                multiline rows="3"></textarea>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Analista de Riesgo</mat-label>
                            <people-picker-input formControlName="Analista_Riesgos" (onRemove)="removeAnalista()"
                                placeholder="Escribe un nombre..." [multiple]="false">
                            </people-picker-input>
                        </mat-form-field>
                    </div>
                </div>
            </div>
            
        </div>

        

        <hr>

        <div class="row card-center">

            <div class="" [ngClass]="{
                'd-none': !showBtnCancelar,
                'col': showBtnCancelar
                }">
                <button [routerLink]="['/']" mat-raised-button class="full-width" color="primary" type="button"
                    (click)="cancel()">Cancelar</button>

            </div>

            <div class="" [ngClass]="{
                'd-none': !showBtnAprobar,
                'col': showBtnAprobar
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="approve()">Aprobar</button>

            </div>
            <div class="" [ngClass]="{
                'd-none': !showBtnAprobarSinVerificacion,
                'col': showBtnAprobarSinVerificacion
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="approveWithoutVerification()">Aprobar sin Verificación</button>

            </div>
            <div class="" [ngClass]="{
                'd-none': !showBtnAprobarEnVerificacion,
                'col': showBtnAprobarEnVerificacion
                }">
                <button mat-raised-button class="full-width" color="primary" type="button" (click)="inVerification()">En
                    Verificación</button>

            </div>

            <div class="" [ngClass]="{
                'd-none': !showBtnObservacionOficina,
                'col': showBtnObservacionOficina
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="officeObservation()">Observación Oficina</button>

            </div>


            <!--<div class="" [ngClass]="{
                'd-none': !showBtnObservacionCPM,
                'col': showBtnObservacionCPM
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="cpmObservation()">Observación CPM</button>

            </div>-->


            <div class="" [ngClass]="{
                'd-none': !showBtnRechazar,
                'col': showBtnRechazar
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="rejected()">Rechazar</button>

            </div>

            <div class="" [ngClass]="{
              'd-none': !showBtnGuardarBorrador,
              'col': showBtnGuardarBorrador
              }">
                <button mat-raised-button class="full-width" color="primary" type="button" (click)="saveDraft()">Guardar
                    Borrador</button>

            </div>
            <div class="" [ngClass]="{
              'd-none': !showBtnGrabar,
              'col': showBtnGrabar
              }">
                <button [ngStyle]="{'background':colorBoton,'color':colorletraBoton}" mat-raised-button
                    class="full-width" (click)="save()" type="button">Grabar</button>

            </div>


            <!--<div class="" [ngClass]="{'d-none': !showBtnEnviarRegularizar,'col': showBtnEnviarRegularizar}">
                <button mat-raised-button class="full-width" color="primary" type="submit">Enviar Regularización</button>
            </div>-->
            <div class="" [ngClass]="{
            'd-none': !showBtnObservar,
            'col': showBtnObservar
            }">
                <button mat-raised-button class="full-width" color="primary" type="submit">Observar</button>
            </div>
            <!--<div class="" [ngClass]="{
            'd-none': !showBtnObservarRegistro,
            'col': showBtnObservarRegistro
            }">
                <button mat-raised-button class="full-width" color="warn" type="submit">Observar Registro</button>
            </div>-->
            <div class="" [ngClass]="{
                'd-none': !mostrarBotonDesestimiento,
                'col': mostrarBotonDesestimiento
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="enviarDesestimiento()">Desestimar</button>
            </div>
            <div class="" [ngClass]="{
                'd-none': !mostrarBotonEnviarRegistroCPM,
                'col': mostrarBotonEnviarRegistroCPM
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="enviarRegistroCPM()">Registro CPM</button>
            </div>
            <div class="" [ngClass]="{
                'd-none': !showBtnEnviar,
                'col': showBtnEnviar
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="send()">Enviar</button>

            </div>
            <div class="" [ngClass]="{
                'd-none': !mostrarBotonEnviarGestionFiles2,
                'col': mostrarBotonEnviarGestionFiles2
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="enviarGestionFiles2()">Enviar</button>
            </div>

            <div class="" [ngClass]="{
                'd-none': !mostrarBotonEnviarObservadoGestor,
                'col': mostrarBotonEnviarObservadoGestor
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="enviarObservadoGestor()">Observar</button>
            </div>
            <div class="" [ngClass]="{
                'd-none': !mostrarBotonEnviarValidacionFiles2,
                'col': mostrarBotonEnviarValidacionFiles2
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="enviarValidacionFiles2()">Enviar</button>
            </div>
            <!--<div>
                <button mat-raised-button class="full-width" color="primary" type="button" (click)="gesionFiles2()">Enviar Gestión Files 2</button>
            </div>-->
            <div class="" [ngClass]="{
                'd-none': !mostrarBotonGuardarPreTerminado,
                'col': mostrarBotonGuardarPreTerminado
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="guardarPreTerminado()">Guardar</button>
            </div>
            <div class="" [ngClass]="{
                'd-none': !mostrarBotonEnviarIngresoFiles2,
                'col': mostrarBotonEnviarIngresoFiles2
                }">
                <button mat-raised-button class="full-width" color="primary" type="button"
                    (click)="enviarIngresoFiles2()">Terminar</button>
            </div>
        </div>
        <br>
    </form>
</div>